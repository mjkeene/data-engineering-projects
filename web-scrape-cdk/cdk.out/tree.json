{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.210.0"},"children":{"WebScrapeCdkStack":{"id":"WebScrapeCdkStack","path":"WebScrapeCdkStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.210.0"},"children":{"ScrapedDataBucket":{"id":"ScrapedDataBucket","path":"WebScrapeCdkStack/ScrapedDataBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebScrapeCdkStack/ScrapedDataBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"versioningConfiguration":{"status":"Enabled"}}}}}},"ScraperFunction":{"id":"ScraperFunction","path":"WebScrapeCdkStack/ScraperFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.210.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WebScrapeCdkStack/ScraperFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.210.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WebScrapeCdkStack/ScraperFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.210.0","metadata":[]}},"Resource":{"id":"Resource","path":"WebScrapeCdkStack/ScraperFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WebScrapeCdkStack/ScraperFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebScrapeCdkStack/ScraperFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScrapedDataBucket7530AD91","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScrapedDataBucket7530AD91","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"ScraperFunctionServiceRoleDefaultPolicy8F701F43","roles":[{"Ref":"ScraperFunctionServiceRole18715408"}]}}}}}}},"AssetImage":{"id":"AssetImage","path":"WebScrapeCdkStack/ScraperFunction/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.210.0"},"children":{"Staging":{"id":"Staging","path":"WebScrapeCdkStack/ScraperFunction/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.210.0"}},"Repository":{"id":"Repository","path":"WebScrapeCdkStack/ScraperFunction/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.210.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WebScrapeCdkStack/ScraperFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"imageUri":{"Fn::Sub":"${AWS::AccountId}.dkr.ecr.${AWS::Region}.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-${AWS::AccountId}-${AWS::Region}:f85155dacd07bb76123d17f7129e2eae72d9d71bc8d8a9a8d57151d46c56dde7"}},"environment":{"variables":{"BUCKET_NAME":{"Ref":"ScrapedDataBucket7530AD91"},"AWS_LAMBDA_HANDLER":"app.lambda_handler","PLAYWRIGHT_BROWSERS_PATH":"0","PYPPETEER_SKIP_CHROMIUM_DOWNLOAD":"true","PWDEBUG":"0","PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD":"1"}},"memorySize":1024,"packageType":"Image","role":{"Fn::GetAtt":["ScraperFunctionServiceRole18715408","Arn"]},"timeout":120}}}}},"HourlyScrapeRule":{"id":"HourlyScrapeRule","path":"WebScrapeCdkStack/HourlyScrapeRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.210.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebScrapeCdkStack/HourlyScrapeRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"scheduleExpression":"rate(1 hour)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["ScraperFunction9503A55F","Arn"]},"input":"{\"url\":\"https://www.cars.com\"}"}]}}},"AllowEventRuleWebScrapeCdkStackScraperFunction6205785A":{"id":"AllowEventRuleWebScrapeCdkStackScraperFunction6205785A","path":"WebScrapeCdkStack/HourlyScrapeRule/AllowEventRuleWebScrapeCdkStackScraperFunction6205785A","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.210.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ScraperFunction9503A55F","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["HourlyScrapeRule48FBB8A8","Arn"]}}}}}},"BucketName":{"id":"BucketName","path":"WebScrapeCdkStack/BucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.210.0"}},"LambdaFunctionName":{"id":"LambdaFunctionName","path":"WebScrapeCdkStack/LambdaFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.210.0"}},"EventBridgeRuleName":{"id":"EventBridgeRuleName","path":"WebScrapeCdkStack/EventBridgeRuleName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.210.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"WebScrapeCdkStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"WebScrapeCdkStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.210.0"}},"Condition":{"id":"Condition","path":"WebScrapeCdkStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.210.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"WebScrapeCdkStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.210.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"WebScrapeCdkStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.210.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}